import{r as l,j as e,L as k,M as v}from"./index-Bf1qAhpw.js";const A="_container_t3w34_1",N="_header_t3w34_10",$="_tabs_t3w34_23",M="_tab_t3w34_23",C="_tabActive_t3w34_48",E="_inputSection_t3w34_54",I="_textarea_t3w34_60",P="_btn_t3w34_77",q="_spin_t3w34_103",L="_error_t3w34_111",T="_resultSection_t3w34_120",t={container:A,header:N,tabs:$,tab:M,tabActive:C,inputSection:E,textarea:I,btn:P,spin:q,error:L,resultSection:T},R=["Meta-Analysis","Anomalies","Patterns","ML Predictions","Knowledge Graph","Search"];function K({apiUrl:n}){const[o,x]=l.useState("Meta-Analysis"),[d,p]=l.useState(!1),[_,h]=l.useState(""),[w,m]=l.useState(""),[s,S]=l.useState(""),y={"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},r=async(a,b,j="POST")=>{p(!0),m(""),h("");try{const i={method:j,headers:y};b&&(i.body=JSON.stringify(b));const u=await fetch(a,i);if(!u.ok)throw new Error(`${u.status} ${u.statusText}`);const c=await u.json();h(c.result||c.analysis||c.response||c.content||JSON.stringify(c,null,2))}catch(i){m(i instanceof Error?i.message:"Request failed")}finally{p(!1)}},f=()=>{if(!(!s.trim()&&o!=="Anomalies"))switch(o){case"Meta-Analysis":return r(`${n}/klaus/imi/meta-analysis/run`,{question:s,datasets:s});case"Anomalies":return r(`${n}/klaus/imi/anomalies/detect`,{dataset:s||"default"});case"Patterns":return r(`${n}/klaus/imi/patterns/discover`,{query:s});case"ML Predictions":return r(`${n}/klaus/imi/ml/predict`,{features:s});case"Knowledge Graph":return r(`${n}/klaus/imi/knowledge-graph/explore?query=${encodeURIComponent(s)}`,void 0,"GET");case"Search":return r(`${n}/klaus/imi/search`,{query:s})}},g={"Meta-Analysis":"Describe datasets or ask a cross-study question...",Anomalies:"Dataset name (leave empty for default)...",Patterns:"What patterns are you looking for?","ML Predictions":"Enter features or describe what to predict...","Knowledge Graph":"Search term to explore relationships...",Search:"Search across all IMI data..."};return e.jsxs("div",{className:t.container,children:[e.jsxs("div",{className:t.header,children:[e.jsx("h1",{children:"Insights"}),e.jsx("p",{children:"AI-powered analysis across 55+ years of consumer research"})]}),e.jsx("div",{className:t.tabs,children:R.map(a=>e.jsx("button",{className:`${t.tab} ${o===a?t.tabActive:""}`,onClick:()=>{x(a),h(""),m("")},children:a},a))}),e.jsxs("div",{className:t.inputSection,children:[e.jsx("textarea",{className:t.textarea,placeholder:g[o],value:s,onChange:a=>S(a.target.value),rows:3}),e.jsxs("button",{className:t.btn,onClick:f,disabled:d,children:[d?e.jsx(k,{size:16,className:t.spin}):null,d?"Analyzing...":`Run ${o}`]})]}),w&&e.jsx("div",{className:t.error,children:w}),_&&e.jsx("div",{className:t.resultSection,children:e.jsx(v,{content:_})})]})}export{K as default};
